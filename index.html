<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>MVK Sea Foods</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{margin:0;font-family:Arial;background:#f4f6f8}
header{background:#0b2c3d;color:#fff;padding:16px;text-align:center}
h2,h3{margin:4px 0}
.section{padding:12px;padding-bottom:160px}
h3{margin-top:18px}
.grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
.card{background:#fff;border-radius:14px;padding:8px;text-align:center}
.card img{width:100%;border-radius:12px}
.price{font-weight:bold;color:#0b2c3d}
select,button{width:100%;padding:8px;margin-top:6px}
.cart{position:fixed;bottom:0;left:0;right:0;background:#fff;padding:12px}
.cart button{background:#25D366;color:#fff;border:none;font-size:16px}
</style>
</head>

<body>

<header>
<h2>MVK Sea Foods</h2>
<h3>MVK సీ ఫుడ్స్</h3>
<p>Fish / చేపలు • Prawns / రొయ్యలు • Crab / పీతలు</p>
</header>

<div class="section" id="content"></div>

<div class="cart">
<div>Total ₹<span id="total">0</span></div>
<button onclick="order()">Order on WhatsApp</button>
</div>

<script>
const PHONE="918688918266";
let cart={}, total=0;

fetch("data/products.json")
.then(r=>r.json())
.then(items=>{
  const c=document.getElementById("content");
  ["fish","prawn","crab"].forEach(cat=>{
    c.innerHTML+=`<h3>${cat.toUpperCase()}</h3><div class="grid" id="${cat}"></div>`;
    items.filter(i=>i.cat===cat && i.stock).forEach(i=>{
      document.getElementById(cat).innerHTML+=`
        <div class="card">
          <img src="images/${i.img}">
          <div>${i.tel}</div>
          <div>${i.en}</div>
          ${i.price>0?`<div class="price">₹${i.price}/kg</div>`:""}
          <select id="q-${i.id}">
            <option value="">Qty</option>
            <option value="0.25">0.25 kg</option>
            <option value="0.5">0.5 kg</option>
            <option value="1">1 kg</option>
          </select>
          <button onclick="add('${i.id}',${i.price},'${i.en}')">Add</button>
        </div>`;
    });
  });
});

function add(id,price,name){
  const q=document.getElementById("q-"+id).value;
  if(!q){alert("Select quantity");return;}
  cart[name]={qty:q,price:price};
  calc();
}
function calc(){
  total=0;
  for(let i in cart) total+=cart[i].qty*cart[i].price;
  document.getElementById("total").innerText=total;
}
function order(){
  if(total===0){alert("Cart empty");return;}
  let msg="MVK Sea Foods Order\n\n";
  for(let i in cart) msg+=`${i} - ${cart[i].qty} kg\n`;
  msg+=`\nTotal ₹${total}`;
  window.location.href="https://wa.me/"+PHONE+"?text="+encodeURIComponent(msg);
}
</script>

</body>
</html>
