<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>MVK Sea Foods</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{margin:0;font-family:Arial;background:#f4f6f8}
header{background:#0b2c3d;color:#fff;text-align:center;padding:16px}
header img{width:80px;height:80px;border-radius:50%;background:#fff;padding:4px}
.section{padding:12px;padding-bottom:200px}
.grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
.card{background:#fff;border-radius:14px;padding:8px;text-align:center;box-shadow:0 4px 10px rgba(0,0,0,.1)}
.card img{width:100%;border-radius:12px}
.price{font-weight:bold;color:#0b2c3d}
select,button{width:100%;padding:8px;margin-top:6px}
button{background:#0b2c3d;color:#fff;border:none}
.cart{
  position:fixed;bottom:0;left:0;right:0;
  background:#fff;padding:12px;
  box-shadow:0 -4px 10px rgba(0,0,0,.2)
}
.cart button{background:#25D366;font-size:16px}
.popup{
  display:none;position:fixed;inset:0;
  background:rgba(0,0,0,.6);z-index:999
}
.popup-box{
  background:#fff;max-width:320px;
  margin:30% auto;padding:20px;
  border-radius:16px;text-align:center
}
.out{color:red;font-weight:bold}
</style>
</head>

<body>

<header>
  <img src="mvk-logo.png">
  <h2>MVK Sea Foods</h2>
  <p>MVK ‡∞∏‡±Ä ‡∞´‡±Å‡∞°‡±ç‡∞∏‡±ç</p>
  <p>Fish / ‡∞ö‡±á‡∞™‡∞≤‡±Å ‚Ä¢ Prawns / ‡∞∞‡±ä‡∞Ø‡±ç‡∞Ø‡∞≤‡±Å ‚Ä¢ Crab / ‡∞™‡±Ä‡∞§‡∞≤‡±Å</p>
</header>

<div class="section" id="content"></div>

<div class="cart">
  <div>Total ‚Çπ<span id="total">0</span></div>
  <button onclick="placeOrder()">Order on WhatsApp</button>
</div>

<div class="popup" id="popup">
  <div class="popup-box">
    <h3>üôè Thank you for ordering</h3>
    <p>Order ID: <b id="oid"></b></p>
    <p><b>Your order will be delivered in 1 hour</b></p>
    <button onclick="openWhatsApp()" style="background:#25D366">
      Open WhatsApp
    </button>
  </div>
</div>

<script>
const PHONE="918688918266";
let cart={}, total=0, finalMsg="", orderId="";

fetch("data/products.json")
.then(r=>r.json())
.then(items=>{
  const c=document.getElementById("content");
  ["Fish","Prawns","Crab"].forEach(cat=>{
    c.innerHTML+=`<h3>${cat}</h3><div class="grid" id="${cat}"></div>`;
    items.filter(i=>i.category===cat).forEach(i=>{
      document.getElementById(cat).innerHTML+=`
        <div class="card">
          <img src="images/${i.image}">
          <div>${i.tel}</div>
          <div>${i.en}</div>
          ${
            i.stock
            ? `
              ${i.price>0?`<div class="price">‚Çπ${i.price}/kg</div>`:""}
              <select id="q-${i.id}">
                <option value="">Qty</option>
                <option value="0.25">0.25 kg</option>
                <option value="0.5">0.5 kg</option>
                <option value="1">1 kg</option>
              </select>
              <button onclick="add('${i.id}',${i.price},'${i.en}')">Add</button>
            `
            : `<div class="out">Out of Stock<br>‡∞∏‡±ç‡∞ü‡∞æ‡∞ï‡±ç ‡∞≤‡±á‡∞¶‡±Å</div>`
          }
        </div>`;
    });
  });
});

function add(id,price,name){
  const q=document.getElementById("q-"+id).value;
  if(!q){alert("Select quantity");return;}
  cart[name]={qty:q,price:price};
  calc();
}

function calc(){
  total=0;
  for(let i in cart) total+=cart[i].qty*cart[i].price;
  document.getElementById("total").innerText=total;
}

function placeOrder(){
  if(total===0){alert("Cart empty");return;}
  orderId="MVK-"+Date.now();
  document.getElementById("oid").innerText=orderId;

  finalMsg="MVK Sea Foods Order\nOrder ID: "+orderId+"\n\n";
  for(let i in cart){
    finalMsg+=`${i} - ${cart[i].qty} kg - ‚Çπ${cart[i].qty*cart[i].price}\n`;
  }
  finalMsg+=`\nTotal Amount: ‚Çπ${total}\nDelivery within 1 hour`;
  document.getElementById("popup").style.display="block";
}

function openWhatsApp(){
  window.location.href="https://wa.me/"+PHONE+"?text="+encodeURIComponent(finalMsg);
}
</script>

</body>
</html>
